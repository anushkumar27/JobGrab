<html lang="en">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>JobGrab | Status</title>

	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">

	<!-- Fav Icon -->
	<link rel="icon" href="img/fav.png" sizes="16x16 32x32">

	<!-- Sweet Alert -->
	<script src="js/sweetalert.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/sweetalert.css">

	
	<script>	
		var jobCount = 1;
		var jobid = 1;
		var intervalID = 0;
		var xhr = null;
		var record = null;
		function loadJobs(jobid)
		{
			xhr = new XMLHttpRequest();
			if(xhr)
			{
				xhr.onreadystatechange = stateChangeHandler;
				xhr.open("GET", "getJobs.php?jobid=" + jobid, true);
				xhr.send(null);
			}
		}	

		function stateChangeHandler()
		{
			if(xhr.readyState == 4 && xhr.status == 200)
			{
				var data = xhr.responseText;
				record= data.split(',');
				//document.getElementById("container").appendChild(document.createTextNode(data));
				//record = JSON.parse(data);
				//document.getElementById("container").appendChild(document.createTextNode(record.job_title));
				putJobs();

			}
		}	
		
		function putJobs()
		{
			
			var container = document.getElementById("list");
			
			var newJob = document.createElement("div");
			newJob.className ="well well-lg col-md-11";
			newJob.style = "margin: 10px;";

			var newTitle = document.createElement("div");
			newTitle.className ="col-md-4";
			newTitle.style = "margin: 0px;padding: 0px;";

			var jobTitle = document.createElement("h2");
			jobTitle.innerHTML = record[0];

			var jobSubTitle = document.createElement("h7");
			jobSubTitle.innerHTML = record[1];

			newTitle.appendChild(jobTitle);
			newTitle.appendChild(jobSubTitle);

			var descriptionDiv = document.createElement("div");
			descriptionDiv.className = "col-md-5";
			descriptionDiv.style = "margin-top: 10px";
			
			var salaryDiv = document.createElement("div");
			salaryDiv.className = "col-md-2";
			salaryDiv.style = "padding: 0px;margin: 0px;";

			var joinDiv = document.createElement("div");
			joinDiv.className = "col-md-3";
			joinDiv.style = "padding: 0px;margin: 0px;";

			var salaryHead= document.createElement("h4");
			salaryHead.style="font-weight: bold;";
			salaryHead.innerHTML="Salary";

			var salary=document.createElement("h5");
			salary.innerHTML=record[2];

			salaryDiv.appendChild(salaryHead);
			salaryDiv.appendChild(salary);
			

			var joiningDiv = document.createElement("div");
			joiningDiv.className = "col-md-3";
			joiningDiv.style = "padding: 0px;margin: 0px;";

			var joiningText = document.createElement("h4");
			joiningText.style = "font-weight: bold";
			joiningText.innerHTML = "Joining Date";

			var joiningVal = document.createElement("h5");
			joiningVal.innerHTML = record[3]


			descriptionDiv.appendChild(salaryDiv);
			joiningDiv.appendChild(joiningText);
			joiningDiv.appendChild(joiningVal);
			descriptionDiv.appendChild(joiningDiv);

			var applyDiv = document.createElement("div");
			applyDiv.className = "col-md-2";
			applyDiv.style = "margin-top: 15px";

			var button = document.createElement("button");
			button.className = "btn btn-success";
			button.style = "width: 100%;height: 10%";
			button.innerHTML = "Applied";

			newJob.appendChild(newTitle);
			newJob.appendChild(descriptionDiv);
			newJob.appendChild(button);
			container.appendChild(newJob);

			jobCount++;

		} 

	</script>

</head>
<body>
	
	<div class="container-fluid" id="list">

		<div class="row">
			<div class="col-md-12">
				<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
							<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
						</button> <a class="navbar-brand" href="#">JobGrab</a>
					</div>

					<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
						<ul class="nav navbar-nav">
							<li>
								<a href="index.html">Home</a>
							</li>
							<li>
								<a href="about.html">About Us</a>
							</li>
							<li>
								<a href="list.html">Job List</a>
							</li>
							<li class="active">
								<a href="status.html">Status</a>
							</li>
							<li>
								<a href="profile.html">Profile</a>
							</li>
							<li>
								<a href="contact.html">Contact Us</a>
							</li>
						</ul>
						<div class="navbar-right" style="margin-right: 10px;">
							<ul class="nav navbar-nav">
								<li>                            
									<a> Welcome, Ashwin </a>
								</li>
		                        <!-- <li>
		                            <a data-toggle="modal" href="#myModal">Sign In</a>
		                        </li> -->
		                    </ul>
		                </div>
		            </div>

		        </nav>
		    </div>
		</div>

	</br>
	</br>
	</br>
	<!-- div class="row" style="padding-left: 80px;" id="list">
			<div class="well well-lg col-md-11" style="margin: 10px;">
					<div class="col-md-4" style="margin: 0px;padding: 0px;">
						<h2> Software Engineer</h2> 
							<h7>VMware Pvt. Ltd., Bengaluru</h7>
					</div>
					<div class="col-md-5" style="margin-top: 10px;">
						<div class="col-md-2" style="padding: 0px;margin: 0px;">
							<h4 style="font-weight: bold;">Salary</h4> 
							<h5> 10 lacs</h5>
						</div>
						<div class="col-md-3" style="padding: 0px;margin: 0px;">
							<h4 style="font-weight: bold;">Joining Date</h4> 
							<h5> 10, March, 2017</h5>
						</div>
					
					</div>
					<div class="col-md-2" style="margin-top: 15px;">
						<button class="btn btn-success" style="width: 100%;height: 10%;">Applied  <span class="glyphicon glyphicon-send"></span></button>
					</div>
			</div>
		</div -->	
</div>
<script type="text/javascript">
	</script>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
	<script>
		var source = new EventSource("sse.php");
		source.onmessage = function(event) {
			d = event.data;
			loadJobs(d);
		};
	</script>
</body>
</html>